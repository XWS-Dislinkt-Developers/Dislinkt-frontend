<div class="job-offers-component">

    <app-left-vertical-navbar></app-left-vertical-navbar>
    <!--<app-top-search-bar></app-top-search-bar> -->
    <app-top-right-vertical-navbar></app-top-right-vertical-navbar>
    <app-bottom-right-vertical-navbar></app-bottom-right-vertical-navbar>
    <app-bottom-left-vertical-navbar></app-bottom-left-vertical-navbar>

    <app-registration-modal></app-registration-modal>
    <app-sign-in-modal></app-sign-in-modal>
    <app-sign-out-modal></app-sign-out-modal>
    <app-forgot-password></app-forgot-password>
    <app-passwordless-login></app-passwordless-login>
  
    <app-mid-right-vertical-navbar></app-mid-right-vertical-navbar>

   <!-- <p (click)="getConnections()"> aaaaaa </p> -->

    <div class="row" style="height:100%;" overflow="hidden" >

      <div class="col-5  d-xs-none d-none d-lg-block d-xl-block rounded border border border-dark"  style="padding:0px; max-height: 100%;">


        <div  class="row justify-content-center" style="margin:10px; overflow:hidden">


          <div class="" style="margin-left:0px; margin-top:10px;">
            <div class="search-bar" style="padding:10px;" >
              <div class="search-form">
                <input  type="search" id="searchInput" class="search-input placeholder-overflow" (keydown.enter)="searchJobOfferByCompany()"[(ngModel)]="searchText" ngDefaultControl  autofocus>
                <button type="submit" class="search-button">
                    <svg class="submit-button">
                    <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#search"></use>
                    </svg>
                </button>
              </div>
              <svg xmlns="http://www.w3.org/2000/svg" width="0" height="0" display="none">
                <symbol id="search" viewBox="0 0 32 32">
                    <path d="M 19.5 3 C 14.26514 3 10 7.2651394 10 12.5 C 10 14.749977 10.810825 16.807458 12.125 18.4375 L 3.28125 27.28125 L 4.71875 28.71875 L 13.5625 19.875 C 15.192542 21.189175 17.250023 22 19.5 22 C 24.73486 22 29 17.73486 29 12.5 C 29 7.2651394 24.73486 3 19.5 3 z M 19.5 5 C 23.65398 5 27 8.3460198 27 12.5 C 27 16.65398 23.65398 20 19.5 20 C 15.34602 20 12 16.65398 12 12.5 C 12 8.3460198 15.34602 5 19.5 5 z" />
                </symbol>
              </svg>
            </div>

          </div>
    


        </div>

        <div style="height:calc(100% - 97px); overflow:scroll"> 

          <div class="page-heading button-shadow" *ngFor="let job of jobs" >
            <div class="media clearfix">
              <div class="media-left pr30">
                <a>
                  <img [src]="'https://avatars.dicebear.com/api/initials/'+job.company.replaceAll(' ','')+'+.svg'" width="70"  class="media-object mw100 rounded shadow-4 button-shadow" style="filter: grayscale(33%);">
                </a>
              </div>
              <div class="media-body" >
                <h4 class="media-heading user-button-text"> 
                  {{job.company}} - <i style="font-size:15px;"> {{job.position}} </i> 
                </h4>
                <p class="lead truncate"><i>Description:</i>  &nbsp; {{job.description}} </p>
                <span *ngFor="let requirement of job.requirements" class="badge rounded-pill bg-dark text-light" style="margin-right: 5px; font-size:12px; font-weight:100">{{requirement}}</span>
              </div>
              <div class="profile-options d-flex" style="float:right; flex:1; padding:2px;"> 
            </div>
            </div>
          </div> 


        </div>

          

      </div>
      

      <div *ngIf="createPanelActive === true" class="col rounded border border border-dark " style="padding: 0px; height:100%; overflow: scroll;">

        <div class="justify-content-center align-items-center" style="padding: 0px;">
        
            <button   class="primary-menu-button button-shadow" style="font-size:15px; margin:5px; padding:5px; overflow:hidden;"  type="button"
            (click)="createPanelActive = !createPanelActive">
              <div class="inline-left-align-container">
                <img  class="card-title-icon" style="width:30px; height:30px;" src = "/assets/images/icon-create-job-offer.svg" alt="chat-send-message"/>
              </div>
            </button> 
            <h5 style="opacity:0.5; text-align: center; margin-top:10%  ;"> Create a job offer with</h5>
            <img src="./../../../assets/images/logo-dislinkt-text.svg" style="margin:0 25%; width:50%; height:50%; opacity:0.8;"> <br>

            </div>

      </div>

      <div *ngIf="createPanelActive === false" class="col rounded border border border-dark " style="padding: 0px; height:100%; overflow: scroll;">
  
        <div class="container" style="padding: 0px;">

          <div class="d-flex justify-content-center" style="margin-top: 25px; margin-bottom:25px;">
            <img *ngIf="!createPanelActive" class="card-title-icon" style="width:30px; height:30px;" src = "/assets/images/icon-create-job-offer.svg" alt="chat-send-message"/>

            <h5 style="opacity:0.5; text-align: center; margin-left:10px; height:17x; max-height:17px"> Create a job offer</h5>



          </div>
          


          <form #myForm="ngForm">
            <div class="container">

                <div class="settings-section">

                    <label class="label-text" for="username">Company's name:</label>
                    <input disabled class="input-text" type="text"  name="company" id="company"  value="{{loggedUserData.name}} - Company">
                    

                    <label class="label-text" for="username">Job position:</label>
                    <input  class="input-text" type="text"  name="position" id="position" [(ngModel)]="position">
                  
                    <label class="label-text" for="username">Experience level:</label>
                    <input  class="input-text" type="text"  name="experienceLevel" id="experienceLevel" [(ngModel)]="experienceLevel">

                    <label class="label-text" for="username">Job's description:</label>
                    <textarea class="input-text" style="resize: none;" name="description" id="description" cols="30" rows="2" [(ngModel)]="description" ></textarea>

                </div>

                <div class="justify-content" style="margin-left:35%;width:50%; margin-top:3px;">

                    <label *ngIf="requirements.length != 0" class="label-text" for="username">Requirements:</label>
                    <div></div>
                    <div *ngFor="let requirement of requirements; let i = index;"> 
                      <input  class="input-text" type="text"  [name]="'requirement'+i" [id]="'requirement'+i" [(ngModel)]="requirement.value" [value]="requirement.value" >
                      <button  class="primary-menu-button button-shadow" style="font-size:15px; margin:5px;padding:5px;"  type="button"
                      (click)="removevalue(i)">
                        <div class="inline-left-align-container">
                          <img class="card-title-icon" style="width:15px; height:15px;" src = "/assets/images/icon-delete.svg" alt="chat-send-message"/>
                        </div>
                      </button>  
                    </div>
                    <div>

                      <button class="primary-menu-button button-shadow" type="button" style="margin-top:-10px; padding:0px;"
                      (click)="addvalue()">
                        <div class="inline-left-align-container">
                            <p style="font-size:0.7rem; margin:5px 15px;">Add Requirements</p>
                        </div>
                      </button>  
                     </div>


                </div>
               
                <div class="centralizer-containter p-3">
                    <input type="button" class="button yes-button" style="font-size:clamp(1.8vh,15px,2.7vh);" (click)="createJobOffer(); myForm.resetForm(); createPanelActive = !createPanelActive " value="Create">
                    <input type="button" class="button reset-button" style="font-size:clamp(1.8vh,15px,2.7vh);" value="Reset" (click)="myForm.resetForm();">
                    <input type="button" class="button no-button" style="font-size:clamp(1.8vh,15px,2.7vh);" value="Cancel" (click)="createPanelActive = !createPanelActive">


                </div>
                

                <p class="info-txt centralizer-containter"> When you're done, click on: 
                    <br> - <b>Create</b>, if you want to publish the job offer.  
                    <br> - <b>Reset</b>, if you want to reset the form.
                    <br> - <b>Cancel</b>, if you want to cancel  the changes.</p>


            </div>
                       
         </form>



        </div>
  
      </div>


    </div>
    
</div>